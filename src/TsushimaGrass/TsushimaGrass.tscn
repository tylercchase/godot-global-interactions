[gd_scene load_steps=13 format=3]

[ext_resource type="Script" path="res://src/TsushimaGrass/Grass.gd" id="1_yuy8j"]
[ext_resource type="Shader" path="res://src/Grass/Grass.gdshader" id="2_6k6e3"]
[ext_resource type="Texture2D" uid="uid://0rv6nhybyvkh" path="res://src/Grass/noise_texture.png" id="3_00p1h"]
[ext_resource type="Shader" path="res://src/Grass/grass_blade.gdshader" id="4_5ml5k"]
[ext_resource type="Shader" path="res://src/Grass/grass_displacement.gdshader" id="5_3mtcy"]

[sub_resource type="ViewportTexture" id="ViewportTexture_3b46d"]
viewport_path = NodePath("abc")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_mfyuy"]
noise_type = 0
frequency = 1.0

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_vyn6j"]
seamless = true
noise = SubResource("FastNoiseLite_mfyuy")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dpks1"]
resource_local_to_scene = true
shader = ExtResource("2_6k6e3")
shader_parameter/displace = SubResource("ViewportTexture_3b46d")
shader_parameter/move_noise = ExtResource("3_00p1h")
shader_parameter/rotation_noise = SubResource("NoiseTexture2D_vyn6j")
shader_parameter/rows = 350.0
shader_parameter/spacing = 0.15

[sub_resource type="ShaderMaterial" id="ShaderMaterial_hosif"]
render_priority = 0
shader = ExtResource("4_5ml5k")
shader_parameter/scale = Vector3(0.082, 0.247, 1)

[sub_resource type="ArrayMesh" id="ArrayMesh_pe4cq"]
_surfaces = [{
"aabb": AABB(-0.609766, 0, 0, 1.26657, 3.0363, 1e-05),
"attribute_data": PackedByteArray(0, 0, 128, 63, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 128, 63, 0, 0, 0, 0, 0, 0, 0, 0),
"format": 4119,
"index_count": 3,
"index_data": PackedByteArray(0, 0, 1, 0, 2, 0),
"material": SubResource("ShaderMaterial_hosif"),
"primitive": 3,
"vertex_count": 3,
"vertex_data": PackedByteArray(83, 35, 40, 63, 0, 0, 0, 0, 0, 0, 0, 0, 255, 127, 255, 127, 255, 255, 255, 191, 160, 25, 28, 191, 0, 0, 0, 0, 0, 0, 0, 0, 255, 127, 255, 127, 255, 255, 255, 191, 84, 171, 47, 60, 181, 82, 66, 64, 0, 0, 0, 0, 255, 127, 255, 127, 255, 255, 255, 191)
}]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_n37b3"]
resource_local_to_scene = true
shader = ExtResource("5_3mtcy")

[node name="Tsushima Grass" type="Node3D"]
transform = Transform3D(1, 0, -7.45058e-09, 0, 1, 0, 7.45058e-09, 0, 1, 0, 0, 0)
script = ExtResource("1_yuy8j")

[node name="Grass" type="GPUParticles3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.25952e-09, 0, -0.974356)
amount = 100000
visibility_aabb = AABB(-23.2431, -4, -22.1655, 46.4862, 8, 44.331)
process_material = SubResource("ShaderMaterial_dpks1")
draw_pass_1 = SubResource("ArrayMesh_pe4cq")

[node name="abc" type="SubViewport" parent="."]
size = Vector2i(513, 513)
render_target_update_mode = 4

[node name="Control" type="Control" parent="abc"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="ColorRect" type="ColorRect" parent="abc/Control"]
material = SubResource("ShaderMaterial_n37b3")
layout_direction = 1
offset_right = 512.0
offset_bottom = 512.0
color = Color(1, 0, 0, 1)

[node name="ColorRect2" type="ColorRect" parent="abc/Control"]
visible = false
custom_minimum_size = Vector2(454, 1180)
anchors_preset = 9
anchor_bottom = 1.0
offset_right = 454.0
offset_bottom = 1140.0
grow_vertical = 2
color = Color(0, 0, 1, 1)
